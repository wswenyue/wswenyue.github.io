import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{o as s,c as a,f as e}from"./app-BWFs2kdN.js";const t={},p=e(`<h1 id="性能分析" tabindex="-1"><a class="header-anchor" href="#性能分析"><span>性能分析</span></a></h1><h3 id="查看进程" tabindex="-1"><a class="header-anchor" href="#查看进程"><span>查看进程</span></a></h3><p>命令：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>adb shell <span class="token function">ps</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>输出示例：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token environment constant">USER</span>     PID   <span class="token environment constant">PPID</span>  VSIZE  RSS     WCHAN    PC        NAME
root      <span class="token number">1</span>     <span class="token number">0</span>     <span class="token number">8904</span>   <span class="token number">788</span>   ffffffff 00000000 S /init
root      <span class="token number">2</span>     <span class="token number">0</span>     <span class="token number">0</span>      <span class="token number">0</span>     ffffffff 00000000 S kthreadd
<span class="token punctuation">..</span>.
u0_a71    <span class="token number">7779</span>  <span class="token number">5926</span>  <span class="token number">1538748</span> <span class="token number">48896</span> ffffffff 00000000 S com.sohu.inputmethod.sogou:classic
u0_a58    <span class="token number">7963</span>  <span class="token number">5926</span>  <span class="token number">1561916</span> <span class="token number">59568</span> ffffffff 00000000 S org.mazhuang.boottimemeasure
<span class="token punctuation">..</span>.
shell     <span class="token number">8750</span>  <span class="token number">217</span>   <span class="token number">10640</span>  <span class="token number">740</span>   00000000 b6f28340 R <span class="token function">ps</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>各列含义：</p><table><thead><tr><th>列名</th><th>含义</th></tr></thead><tbody><tr><td>USER</td><td>所属用户</td></tr><tr><td>PID</td><td>进程 ID</td></tr><tr><td>PPID</td><td>父进程 ID</td></tr><tr><td>NAME</td><td>进程名</td></tr></tbody></table><h3 id="查看实时资源占用情况" tabindex="-1"><a class="header-anchor" href="#查看实时资源占用情况"><span>查看实时资源占用情况</span></a></h3><p>命令：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>adb shell <span class="token function">top</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>输出示例：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>User <span class="token number">0</span>%, System <span class="token number">6</span>%, IOW <span class="token number">0</span>%, IRQ <span class="token number">0</span>%
User <span class="token number">3</span> + Nice <span class="token number">0</span> + Sys <span class="token number">21</span> + Idle <span class="token number">280</span> + IOW <span class="token number">0</span> + IRQ <span class="token number">0</span> + SIRQ <span class="token number">3</span> <span class="token operator">=</span> <span class="token number">307</span>

  PID PR CPU% S  <span class="token comment">#THR     VSS     RSS PCY UID      Name</span>
 <span class="token number">8763</span>  <span class="token number">0</span>   <span class="token number">3</span>% R     <span class="token number">1</span>  10640K   1064K  <span class="token function">fg</span> shell    <span class="token function">top</span>
  <span class="token number">131</span>  <span class="token number">0</span>   <span class="token number">3</span>% S     <span class="token number">1</span>      0K      0K  <span class="token function">fg</span> root     dhd_dpc
 <span class="token number">6144</span>  <span class="token number">0</span>   <span class="token number">0</span>% S   <span class="token number">115</span> 1682004K 115916K  <span class="token function">fg</span> system   system_server
  <span class="token number">132</span>  <span class="token number">0</span>   <span class="token number">0</span>% S     <span class="token number">1</span>      0K      0K  <span class="token function">fg</span> root     dhd_rxf
 <span class="token number">1731</span>  <span class="token number">0</span>   <span class="token number">0</span>% S     <span class="token number">6</span>  20288K    788K  <span class="token function">fg</span> root     /system/bin/mpdecision
  <span class="token number">217</span>  <span class="token number">0</span>   <span class="token number">0</span>% S     <span class="token number">6</span>  18008K    356K  <span class="token function">fg</span> shell    /sbin/adbd
 <span class="token punctuation">..</span>.
 <span class="token number">7779</span>  <span class="token number">2</span>   <span class="token number">0</span>% S    <span class="token number">19</span> 1538748K  48896K  <span class="token function">bg</span> u0_a71   com.sohu.inputmethod.sogou:classic
 <span class="token number">7963</span>  <span class="token number">0</span>   <span class="token number">0</span>% S    <span class="token number">18</span> 1561916K  59568K  <span class="token function">fg</span> u0_a58   org.mazhuang.boottimemeasure
 <span class="token punctuation">..</span>.
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>各列含义：</p><table><thead><tr><th>列名</th><th>含义</th></tr></thead><tbody><tr><td>PID</td><td>进程 ID</td></tr><tr><td>PR</td><td>优先级</td></tr><tr><td>CPU%</td><td>当前瞬间占用 CPU 百分比</td></tr><tr><td>S</td><td>进程状态（R=运行，S=睡眠，T=跟踪/停止，Z=僵尸进程）</td></tr><tr><td>#THR</td><td>线程数</td></tr><tr><td>VSS</td><td>Virtual Set Size 虚拟耗用内存（包含共享库占用的内存）</td></tr><tr><td>RSS</td><td>Resident Set Size 实际使用物理内存（包含共享库占用的内存）</td></tr><tr><td>PCY</td><td>调度策略优先级，SP_BACKGROUND/SPFOREGROUND</td></tr><tr><td>UID</td><td>进程所有者的用户 ID</td></tr><tr><td>NAME</td><td>进程名</td></tr></tbody></table><p><code>top</code> 命令还支持一些命令行参数，详细用法如下：</p><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>Usage: <span class="token function">top</span> <span class="token punctuation">[</span> <span class="token parameter variable">-m</span> max_procs <span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token parameter variable">-n</span> iterations <span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token parameter variable">-d</span> delay <span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token parameter variable">-s</span> sort_column <span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token parameter variable">-t</span> <span class="token punctuation">]</span> <span class="token punctuation">[</span> <span class="token parameter variable">-h</span> <span class="token punctuation">]</span>
    <span class="token parameter variable">-m</span> num  最多显示多少个进程
    <span class="token parameter variable">-n</span> num  刷新多少次后退出
    <span class="token parameter variable">-d</span> num  刷新时间间隔（单位秒，默认值 <span class="token number">5</span>）
    <span class="token parameter variable">-s</span> col  按某列排序（可用 col 值：cpu, vss, rss, thr）
    <span class="token parameter variable">-t</span>      显示线程信息
    <span class="token parameter variable">-h</span>      显示帮助文档
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code>eg:查看com.tencent相关的进程线程的实时cpu占用
$ <span class="token function">top</span> <span class="token parameter variable">-n</span> <span class="token number">3</span> <span class="token parameter variable">-s</span> cpu <span class="token parameter variable">-t</span> <span class="token operator">|</span><span class="token function">grep</span> <span class="token string">&quot;com.tencent&quot;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="查看某个进程mmap情况" tabindex="-1"><a class="header-anchor" href="#查看某个进程mmap情况"><span>查看某个进程mmap情况</span></a></h3><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment"># pid 需要替换成当前进程号</span>
$ adb shell <span class="token function">cat</span> /proc/pid/maps
<span class="token comment"># 如果有权限问题，可以以run-as用户执行</span>
$ adb shell run-as packageName
$ <span class="token function">cat</span> /proc/pid/maps
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="查看某进程的status文件" tabindex="-1"><a class="header-anchor" href="#查看某进程的status文件"><span>查看某进程的status文件</span></a></h3><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment"># 如果有权限问题。可以使用run-as用户执行</span>
<span class="token comment"># pid 替换成对应进程的id</span>
$ <span class="token function">cat</span> /proc/pid/status
<span class="token comment"># 例如下面是微信进程的status信息</span>
Name:	com.tencent.mm
State:	S <span class="token punctuation">(</span>sleeping<span class="token punctuation">)</span>
Tgid:	<span class="token number">25713</span>
Pid:	<span class="token number">25713</span>
PPid:	<span class="token number">502</span>
TracerPid:	<span class="token number">0</span>
Uid:	<span class="token number">10083</span>	<span class="token number">10083</span>	<span class="token number">10083</span>	<span class="token number">10083</span>
Gid:	<span class="token number">10083</span>	<span class="token number">10083</span>	<span class="token number">10083</span>	<span class="token number">10083</span>
FDSize:	<span class="token number">512</span>
Groups:	<span class="token number">1015</span> <span class="token number">1028</span> <span class="token number">3001</span> <span class="token number">3002</span> <span class="token number">3003</span> <span class="token number">9997</span> <span class="token number">50083</span>
VmPeak:	 <span class="token number">2340232</span> kB
VmSize:	 <span class="token number">2319324</span> kB
VmLck:	       <span class="token number">0</span> kB
VmPin:	       <span class="token number">0</span> kB
VmHWM:	  <span class="token number">250884</span> kB
VmRSS:	  <span class="token number">244704</span> kB
VmData:	  <span class="token number">521528</span> kB
VmStk:	    <span class="token number">8192</span> kB
VmExe:	      <span class="token number">12</span> kB
VmLib:	  <span class="token number">259588</span> kB
VmPTE:	    <span class="token number">1608</span> kB
VmSwap:	       <span class="token number">0</span> kB
Threads:	<span class="token number">179</span>
SigQ:	<span class="token number">0</span>/13835
SigPnd:	0000000000000000
ShdPnd:	0000000000000000
SigBlk:	0000000000001204
SigIgn:	0000000000001000
SigCgt:	00000002000084f8
CapInh:	0000000000000000
CapPrm:	0000000000000000
CapEff:	0000000000000000
CapBnd:	0000000000000000
Cpus_allowed:	ff
Cpus_allowed_list:	<span class="token number">0</span>-7
voluntary_ctxt_switches:	<span class="token number">5277</span>
nonvoluntary_ctxt_switches:	<span class="token number">882</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,22),l=[p];function i(c,r){return s(),a("div",null,l)}const u=n(t,[["render",i],["__file","performance.html.vue"]]),m=JSON.parse('{"path":"/note/performance.html","title":"性能分析","lang":"zh-CN","frontmatter":{"description":"性能分析 查看进程 命令： 输出示例： 各列含义： 查看实时资源占用情况 命令： 输出示例： 各列含义： top 命令还支持一些命令行参数，详细用法如下： 查看某个进程mmap情况 查看某进程的status文件","head":[["meta",{"property":"og:url","content":"https://wswenyue.vip/note/performance.html"}],["meta",{"property":"og:site_name","content":"Blog"}],["meta",{"property":"og:title","content":"性能分析"}],["meta",{"property":"og:description","content":"性能分析 查看进程 命令： 输出示例： 各列含义： 查看实时资源占用情况 命令： 输出示例： 各列含义： top 命令还支持一些命令行参数，详细用法如下： 查看某个进程mmap情况 查看某进程的status文件"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-03-31T13:08:40.000Z"}],["meta",{"property":"article:author","content":"Mr.WenYue"}],["meta",{"property":"article:modified_time","content":"2024-03-31T13:08:40.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"性能分析\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-03-31T13:08:40.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Mr.WenYue\\",\\"url\\":\\"https://github.com/wswenyue/\\"}]}"]]},"headers":[{"level":3,"title":"查看进程","slug":"查看进程","link":"#查看进程","children":[]},{"level":3,"title":"查看实时资源占用情况","slug":"查看实时资源占用情况","link":"#查看实时资源占用情况","children":[]},{"level":3,"title":"查看某个进程mmap情况","slug":"查看某个进程mmap情况","link":"#查看某个进程mmap情况","children":[]},{"level":3,"title":"查看某进程的status文件","slug":"查看某进程的status文件","link":"#查看某进程的status文件","children":[]}],"git":{"createdTime":1711890520000,"updatedTime":1711890520000,"contributors":[{"name":"wswenyue","email":"wswenyue@163.com","commits":1}]},"readingTime":{"minutes":2.26,"words":679},"filePathRelative":"note/performance.md","localizedDate":"2024年3月31日","excerpt":"\\n<h3>查看进程</h3>\\n<p>命令：</p>\\n<div class=\\"language-bash\\" data-ext=\\"sh\\" data-title=\\"sh\\"><pre class=\\"language-bash\\"><code>adb shell <span class=\\"token function\\">ps</span>\\n</code></pre></div><p>输出示例：</p>\\n<div class=\\"language-bash\\" data-ext=\\"sh\\" data-title=\\"sh\\"><pre class=\\"language-bash\\"><code><span class=\\"token environment constant\\">USER</span>     PID   <span class=\\"token environment constant\\">PPID</span>  VSIZE  RSS     WCHAN    PC        NAME\\nroot      <span class=\\"token number\\">1</span>     <span class=\\"token number\\">0</span>     <span class=\\"token number\\">8904</span>   <span class=\\"token number\\">788</span>   ffffffff 00000000 S /init\\nroot      <span class=\\"token number\\">2</span>     <span class=\\"token number\\">0</span>     <span class=\\"token number\\">0</span>      <span class=\\"token number\\">0</span>     ffffffff 00000000 S kthreadd\\n<span class=\\"token punctuation\\">..</span>.\\nu0_a71    <span class=\\"token number\\">7779</span>  <span class=\\"token number\\">5926</span>  <span class=\\"token number\\">1538748</span> <span class=\\"token number\\">48896</span> ffffffff 00000000 S com.sohu.inputmethod.sogou:classic\\nu0_a58    <span class=\\"token number\\">7963</span>  <span class=\\"token number\\">5926</span>  <span class=\\"token number\\">1561916</span> <span class=\\"token number\\">59568</span> ffffffff 00000000 S org.mazhuang.boottimemeasure\\n<span class=\\"token punctuation\\">..</span>.\\nshell     <span class=\\"token number\\">8750</span>  <span class=\\"token number\\">217</span>   <span class=\\"token number\\">10640</span>  <span class=\\"token number\\">740</span>   00000000 b6f28340 R <span class=\\"token function\\">ps</span>\\n</code></pre></div>","autoDesc":true}');export{u as comp,m as data};
