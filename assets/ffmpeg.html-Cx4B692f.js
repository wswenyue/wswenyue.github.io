import{_ as t}from"./plugin-vue_export-helper-DlAUqK2U.js";import{r as p,o as i,c as l,a as e,b as s,d as n,f as o}from"./app-BWFs2kdN.js";const r={},c=o(`<h1 id="ffmpeg-使用" tabindex="-1"><a class="header-anchor" href="#ffmpeg-使用"><span>FFMpeg 使用</span></a></h1><h2 id="格式转换" tabindex="-1"><a class="header-anchor" href="#格式转换"><span>格式转换</span></a></h2><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment"># webm(视频) 转换成MP3(品质为320K)</span>
<span class="token comment"># -ab : audio bit rate</span>
<span class="token comment"># -ar : audio sample rate</span>
<span class="token comment"># -i : 输入</span>
<span class="token comment"># -y : 输出</span>
<span class="token comment"># -vn : 过滤video</span>
$ ffmpeg <span class="token parameter variable">-i</span> in.webm <span class="token parameter variable">-vn</span> <span class="token parameter variable">-ab</span> 320K <span class="token parameter variable">-y</span> out.mp3
<span class="token comment"># 过滤调视频轨。输出的音频编码使用源视频的音频编码</span>
$ ffmpeg <span class="token parameter variable">-i</span> in.webm <span class="token parameter variable">-vn</span> <span class="token parameter variable">-acodec</span> copy <span class="token parameter variable">-y</span> out.webm
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="帧抽取" tabindex="-1"><a class="header-anchor" href="#帧抽取"><span>帧抽取</span></a></h2><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment"># 提取图片</span>
<span class="token comment"># -i:后面跟视频文件路径</span>
<span class="token comment"># -r:后面跟帧率，如1表示每秒一帧的速度</span>
<span class="token comment"># -ss:提取图片的起始时间</span>
<span class="token comment"># -t:结束时间</span>
<span class="token comment"># %03d.png：提取图片的命名格式，用 3 位数字自动生成从小到大的文件名</span>
$ ffmpeg <span class="token parameter variable">-i</span> test.mp4 <span class="token parameter variable">-r</span> <span class="token number">1</span> <span class="token parameter variable">-ss</span> 00:00:00 <span class="token parameter variable">-t</span> 00:30:00 img-%03d.png

<span class="token comment"># 提取关键帧</span>
<span class="token comment"># -i :输入文件，这里的话其实就是视频,</span>
<span class="token comment"># -vf:是一个命令行，表示过滤图形的描述, 选择过滤器select会选择帧进行输出：包括过滤器常量</span>
<span class="token comment"># pict_type和对应的类型:PICT_TYPE_I 表示是I帧，即关键帧。</span>
<span class="token comment"># -vsync 2:阻止每个关键帧产生多余的拷贝</span>
<span class="token comment"># -f image2 name_%02d.jpeg:将视频帧写入到图片中，样式的格式一般是:“%d” 或者 “%0Nd”</span>
<span class="token comment"># -s:分辨率，1920*1080</span>
$ ffmpeg <span class="token parameter variable">-i</span> test.mp4 <span class="token parameter variable">-vf</span> <span class="token assign-left variable">select</span><span class="token operator">=</span><span class="token string">&#39;eq(pict_type\\,I)&#39;</span> <span class="token parameter variable">-vsync</span> <span class="token number">2</span> <span class="token parameter variable">-s</span> <span class="token number">1920</span>*1080 <span class="token parameter variable">-f</span> image2 key-%02d.jpg
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="帧" tabindex="-1"><a class="header-anchor" href="#帧"><span>帧</span></a></h2><div class="language-bash line-numbers-mode" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="token comment"># 打印I帧</span>
<span class="token comment"># grep -n 输出行号，显示是哪一帧</span>
$ ffprobe <span class="token parameter variable">-select_streams</span> <span class="token function">v</span> <span class="token parameter variable">-show_frames</span> <span class="token parameter variable">-show_entries</span> <span class="token assign-left variable">frame</span><span class="token operator">=</span>pict_type <span class="token parameter variable">-of</span> csv test.mp4 <span class="token operator">|</span> <span class="token function">grep</span> <span class="token parameter variable">-n</span> I
<span class="token comment"># 输出关键帧的详细信息 xml格式</span>
$ ffprobe <span class="token parameter variable">-show_frames</span> <span class="token parameter variable">-select_streams</span> <span class="token function">v</span> <span class="token parameter variable">-of</span> xml test.mp4 <span class="token operator">|</span><span class="token function">grep</span> <span class="token string">&quot;pict_type=<span class="token entity" title="\\&quot;">\\&quot;</span>I<span class="token entity" title="\\&quot;">\\&quot;</span>&quot;</span>

<span class="token comment"># eg :</span>
<span class="token comment"># &lt;frame media_type=&quot;video&quot; stream_index=&quot;1&quot; key_frame=&quot;1&quot; pkt_pts=&quot;3176970&quot; pkt_pts_time=&quot;35.299667&quot; pkt_dts=&quot;3176971&quot; pkt_dts_time=&quot;35.299678&quot; best_effort_timestamp=&quot;3176970&quot; best_effort_timestamp_time=&quot;35.299667&quot; pkt_duration=&quot;3483&quot; pkt_duration_time=&quot;0.038700&quot; pkt_pos=&quot;4958317&quot; pkt_size=&quot;18037&quot; width=&quot;544&quot; height=&quot;960&quot; pix_fmt=&quot;yuv420p&quot; pict_type=&quot;I&quot; coded_picture_number=&quot;910&quot; display_picture_number=&quot;0&quot; interlaced_frame=&quot;0&quot; top_field_first=&quot;0&quot; repeat_pict=&quot;0&quot; chroma_location=&quot;left&quot;/&gt;</span>

<span class="token comment"># key_frame：是否是关键帧</span>
<span class="token comment"># pkt_pts：帧的pts数值</span>
<span class="token comment"># pkt_pts_time：通过time_base计算出来的显示时间</span>
<span class="token comment"># pkt_dts：帧的dts数值</span>
<span class="token comment"># pkt_dts_time：通过time_base计算出来的dts时间</span>
<span class="token comment"># pict_type：帧类型（I、B、P）</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="useful-links" tabindex="-1"><a class="header-anchor" href="#useful-links"><span>useful links</span></a></h2>`,8),m={href:"https://gist.github.com/protrolium/e0dbd4bb0f1a396fcb55",target:"_blank",rel:"noopener noreferrer"},d={href:"https://mp.weixin.qq.com/s/1yCmRlaIbXUA_m60kP5gzQ",target:"_blank",rel:"noopener noreferrer"};function u(v,b){const a=p("ExternalLinkIcon");return i(),l("div",null,[c,e("p",null,[e("a",m,[s("https://gist.github.com/protrolium/e0dbd4bb0f1a396fcb55"),n(a)])]),e("p",null,[e("a",d,[s("FFmpeg 视频处理入门教程-阮一峰"),n(a)])])])}const h=t(r,[["render",u],["__file","ffmpeg.html.vue"]]),g=JSON.parse('{"path":"/note/ffmpeg.html","title":"FFMpeg 使用","lang":"zh-CN","frontmatter":{"description":"FFMpeg 使用 格式转换 帧抽取 帧 useful links https://gist.github.com/protrolium/e0dbd4bb0f1a396fcb55 FFmpeg 视频处理入门教程-阮一峰","head":[["meta",{"property":"og:url","content":"https://wswenyue.vip/note/ffmpeg.html"}],["meta",{"property":"og:site_name","content":"Blog"}],["meta",{"property":"og:title","content":"FFMpeg 使用"}],["meta",{"property":"og:description","content":"FFMpeg 使用 格式转换 帧抽取 帧 useful links https://gist.github.com/protrolium/e0dbd4bb0f1a396fcb55 FFmpeg 视频处理入门教程-阮一峰"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-03-31T13:08:40.000Z"}],["meta",{"property":"article:author","content":"Mr.WenYue"}],["meta",{"property":"article:modified_time","content":"2024-03-31T13:08:40.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"FFMpeg 使用\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-03-31T13:08:40.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Mr.WenYue\\",\\"url\\":\\"https://github.com/wswenyue/\\"}]}"]]},"headers":[{"level":2,"title":"格式转换","slug":"格式转换","link":"#格式转换","children":[]},{"level":2,"title":"帧抽取","slug":"帧抽取","link":"#帧抽取","children":[]},{"level":2,"title":"帧","slug":"帧","link":"#帧","children":[]},{"level":2,"title":"useful links","slug":"useful-links","link":"#useful-links","children":[]}],"git":{"createdTime":1711890520000,"updatedTime":1711890520000,"contributors":[{"name":"wswenyue","email":"wswenyue@163.com","commits":1}]},"readingTime":{"minutes":1.6,"words":481},"filePathRelative":"note/ffmpeg.md","localizedDate":"2024年3月31日","excerpt":"\\n<h2>格式转换</h2>\\n<div class=\\"language-bash\\" data-ext=\\"sh\\" data-title=\\"sh\\"><pre class=\\"language-bash\\"><code><span class=\\"token comment\\"># webm(视频) 转换成MP3(品质为320K)</span>\\n<span class=\\"token comment\\"># -ab : audio bit rate</span>\\n<span class=\\"token comment\\"># -ar : audio sample rate</span>\\n<span class=\\"token comment\\"># -i : 输入</span>\\n<span class=\\"token comment\\"># -y : 输出</span>\\n<span class=\\"token comment\\"># -vn : 过滤video</span>\\n$ ffmpeg <span class=\\"token parameter variable\\">-i</span> in.webm <span class=\\"token parameter variable\\">-vn</span> <span class=\\"token parameter variable\\">-ab</span> 320K <span class=\\"token parameter variable\\">-y</span> out.mp3\\n<span class=\\"token comment\\"># 过滤调视频轨。输出的音频编码使用源视频的音频编码</span>\\n$ ffmpeg <span class=\\"token parameter variable\\">-i</span> in.webm <span class=\\"token parameter variable\\">-vn</span> <span class=\\"token parameter variable\\">-acodec</span> copy <span class=\\"token parameter variable\\">-y</span> out.webm\\n</code></pre></div>","autoDesc":true}');export{h as comp,g as data};
